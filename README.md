# OpenGL with Jank

This repo has no end-goal purpose other than for it to be a vehicle that I use to learn OpenGL and Jank. I'm not a C/C++ language or toolchain expert, so I can't predict ahead of time what sorts of issues you may run into trying to run the code in this repo.

The current setup is heavily skewed toward macos, since that's what I'm running.

You certainly need OpenGL and GLFW to get anywhere close to running the code.

Even if you can't run the code, hopefully you can still learn how Jank interops with C and C++ in order to make use of the OpenGL API.

## Project Structure

```
src/
├── engine/         # Reusable game engine code
│   ├── macros.jank # clet macro for C-style error handling
│   ├── io/         # File I/O
│   ├── math/       # GLM math helpers
│   ├── shaders/    # Shader compilation
│   ├── geometry/   # Basic shapes
│   ├── textures/   # Texture loading
│   ├── events/     # Event store
│   └── gltf/       # glTF model loading
└── examples/       # Example games
    └── demo/       # Demo with 3D player and camera
```

You may notice that the engine modules are structured as components with an interface.jank and core.jank file. This is because I'm simulating a [Polylith](https://polylith.gitbook.io/polylith/) architecture.

## Getting Started

```bash
git clone --recursive ...
./setup    # builds dependencies (ozz-animation)
./run      # run the demo
```

## Points of Interest

### [clet](src/engine/macros.jank) macro

One of the first things I noticed working with C in Jank is that you end up with a lot of nested conditionals doing error checking, so I decided to experiment with a macro called `clet` which enables more linear C programming, error checking, and error handling.

### [Interop Guide](CPP_INTEROP_DOCUMENTATION.md)

This interop guide was generated by AI and may be inaccurate in certain areas, but overall, I found it to be very useful for either finding a valid interop pattern or leading to a good enough question to ask in the Jank slack channel.

## Running the code

Presuming you have all the required tweaks and setup for your platform:

```bash
./run              # runs the default example (demo)
./run demo         # runs examples.demo.core
./run my-game      # runs examples.my-game.core
```

## Creating a New Game

1. `mkdir -p src/examples/my-game`
2. Create `src/examples/my-game/core.jank` with namespace `examples.my-game.core`
3. Implement a `-main` function
4. `./run my-game`

## Conclusion

I hope this is useful in some way!
